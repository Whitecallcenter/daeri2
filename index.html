<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì¶”ì²œ í¬ì¸íŠ¸ ì´ë²¤íŠ¸</title>
<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0f172a;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.container {
  width: 100%;
  max-width: 420px;
  padding: 20px;
  text-align: center;
}
h1 { font-size: 22px; margin-bottom: 10px; }
.points { font-size: 20px; margin: 10px 0; }
.notice { font-size: 13px; color: #cbd5f5; margin-bottom: 10px; }
.phone {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  margin-bottom: 10px;
}
button {
  width: 100%;
  padding: 14px;
  background: #22c55e;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: bold;
}
button:disabled {
  background: #475569;
}
.machine {
  margin: 20px auto;
  width: 200px;
  height: 120px;
  background: #1e293b;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
}
.ball {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #facc15;
  color: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  position: absolute;
  left: 80px;
  top: -50px;
  animation: drop 1s ease-out forwards;
}
@keyframes drop {
  to { top: 40px; }
}
.results {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 6px;
  margin-top: 10px;
}
.result-ball {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: #38bdf8;
  color: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 12px;
  font-weight: bold;
}
.footer {
  margin-top: 15px;
  font-size: 13px;
  color: #e5e7eb;
}
</style>
</head>
<body>

<div class="container">
  <h1>ğŸ ì¶”ì²œ í¬ì¸íŠ¸ ì´ë²¤íŠ¸</h1>
  <div class="points">í˜„ì¬ í¬ì¸íŠ¸: <b id="points">0</b>ì </div>
  <div class="notice">10ë§Œì  ì´ìƒ ì‹œ ì¶©ì „ê¸ˆ êµí™˜ ê°€ëŠ¥</div>
  <div class="notice">ë‚¨ì€ ì¶”ì²¨ ê¸°íšŒ: <span id="chances">6</span>íšŒ</div>

  <input class="phone" id="phone" placeholder="ê¸°ì‚¬ íœ´ëŒ€í° ë²ˆí˜¸ ì…ë ¥ (010xxxxxxxx)" />
  <button id="drawBtn">ğŸ± ì¶”ì²¨í•˜ê¸°</button>

  <div class="machine" id="machine"></div>
  <div class="results" id="results"></div>

  <div class="footer">
    ğŸ“ ê¸°ì‚¬ ê°€ì… ë¬¸ì˜: <b>02-470-0071</b><br/>
    â€» ì‹¤ì œ ê¸°ì‚¬ ë“±ë¡ ì™„ë£Œ ì‹œ ê¸°íšŒ ì§€ê¸‰
  </div>
</div>

<script>
let state = JSON.parse(localStorage.getItem("eventState")) || {
  points: 0,
  chances: 6,
  draws: []
};

const pointsEl = document.getElementById("points");
const chancesEl = document.getElementById("chances");
const machine = document.getElementById("machine");
const results = document.getElementById("results");
const btn = document.getElementById("drawBtn");

function save() {
  localStorage.setItem("eventState", JSON.stringify(state));
}

function render() {
  pointsEl.innerText = state.points;
  chancesEl.innerText = state.chances;
  results.innerHTML = "";
  state.draws.forEach(p => {
    const b = document.createElement("div");
    b.className = "result-ball";
    b.innerText = p/1000 + "ë§Œ";
    results.appendChild(b);
  });
  btn.disabled = state.chances <= 0;
}
render();

btn.onclick = () => {
  const phone = document.getElementById("phone").value;
  if (!/^010\d{8}$/.test(phone)) {
    alert("íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    return;
  }
  if (state.chances <= 0) return;

  btn.disabled = true;
  machine.innerHTML = "";

  const remaining = 6 - state.draws.length;
  const maxRemain = 90000 - state.points;
  const minGain = Math.max(3000, maxRemain / remaining * 0.8);
  const maxGain = Math.max(5000, maxRemain / remaining * 1.2);
  const gain = Math.min(
    Math.floor((Math.random() * (maxGain - minGain) + minGain) / 1000) * 1000,
    maxRemain
  );

  const ball = document.createElement("div");
  ball.className = "ball";
  ball.innerText = gain / 1000 + "ë§Œ";
  machine.appendChild(ball);

  setTimeout(() => {
    state.points += gain;
    state.chances -= 1;
    state.draws.push(gain);
    save();
    render();
    btn.disabled = false;
  }, 1200);
};
</script>

</body>
</html>
