<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëŒ€ë¦¬ ë¡œë˜ í¬ì¸íŠ¸</title>
<style>
html,body{margin:0;height:100%;background:#111;color:#fff;font-family:sans-serif}
.container{height:100vh;display:flex;flex-direction:column;justify-content:space-between;padding:20px}
h2{text-align:center}
.point{text-align:center;font-size:22px}
button{width:100%;padding:18px;font-size:18px;border:none;border-radius:12px;background:#ffcc00}
input{width:100%;padding:14px;font-size:16px;border-radius:10px;border:none;margin-top:10px}
.log{min-height:80px;color:#ccc;font-size:14px}
.small{text-align:center;font-size:12px;color:#777}
</style>
</head>
<body>

<div class="container">
  <div>
    <h2>ğŸ° ëŒ€ë¦¬ìš´ì „ ë¡œë˜</h2>
    <div class="point">í¬ì¸íŠ¸: <span id="point">0</span>P</div>
    <div class="point">ë‚¨ì€ ë¡œë˜ ì„¸íŠ¸: <span id="set">3</span></div>
  </div>

  <div>
    <button id="spinBtn">ë¡œë˜ êµ´ë¦¬ê¸° ğŸ¯</button>
    <div class="log" id="log"></div>

    <hr style="margin:20px 0;border:1px solid #333">

    <h3>ğŸš– ê¸°ì‚¬ ì†Œê°œ</h3>
    <input id="phone" placeholder="ê¸°ì‚¬ ì „í™”ë²ˆí˜¸ (-ì—†ì´)">
    <button onclick="addDriver()">ê¸°ì‚¬ ì†Œê°œí•˜ê³  3ë§ŒP ë°›ê¸°</button>
  </div>

  <div class="small">
    10ë§ŒP ì´ìƒë¶€í„° ì¶©ì „ê¸ˆ ì „í™˜ ê°€ëŠ¥<br>
    ë¡œë˜ ì¢…ë£Œ í›„ í¬ì¸íŠ¸ëŠ” ê¸°ì‚¬ ì†Œê°œë¡œë§Œ íšë“
  </div>
</div>

<script>
const deviceKey = "device_id";
if(!localStorage.getItem(deviceKey)){
  localStorage.setItem(deviceKey, Math.random().toString(36).substr(2,9));
}
const deviceId = localStorage.getItem(deviceKey);

let point = Number(localStorage.getItem("point")) || 0;
let set = Number(localStorage.getItem("set")) || 3;
let spinCount = Number(localStorage.getItem("spin")) || 0;
let introduced = JSON.parse(localStorage.getItem("introduced") || "[]");

const rewards = [
 [50000,30000,20000],
 [25000,15000,10000],
 [10000,5000,3000],
 [5000,3000,1000],
 [5000,3000,1000]
];

update();

document.getElementById("spinBtn").onclick = () => {
 if(set<=0) return log("âŒ ë¡œë˜ ì¢…ë£Œ. ê¸°ì‚¬ ì†Œê°œë¡œ í¬ì¸íŠ¸ íšë“ ê°€ëŠ¥");

 let reward = rewards[spinCount][Math.floor(Math.random()*3)];
 point += reward;
 spinCount++;

 log(`ğŸ‰ ${reward.toLocaleString()}P ë‹¹ì²¨`);

 if(spinCount===5){
   spinCount=0;
   set--;
   log("ğŸ”„ ë¡œë˜ ì„¸íŠ¸ ì¢…ë£Œ");
 }

 save();
 update();
};

function addDriver(){
 let phone = document.getElementById("phone").value.trim();
 if(phone.length<10) return log("ì „í™”ë²ˆí˜¸ í™•ì¸");

 if(introduced.includes(phone)) return log("ì´ë¯¸ ë“±ë¡ëœ ê¸°ì‚¬");

 introduced.push(phone);
 point += 30000;

 saveAdmin(phone, deviceId);
 save();
 update();
 log("âœ… ê¸°ì‚¬ ì†Œê°œ ì™„ë£Œ +30,000P");
}

function save(){
 localStorage.setItem("point", point);
 localStorage.setItem("set", set);
 localStorage.setItem("spin", spinCount);
 localStorage.setItem("introduced", JSON.stringify(introduced));
}

function update(){
 document.getElementById("point").innerText = point.toLocaleString();
 document.getElementById("set").innerText = set;
}

function log(msg){
 document.getElementById("log").innerHTML = msg;
}

function saveAdmin(phone, device){
 let data = JSON.parse(localStorage.getItem("admin_log")||"[]");
 data.push({phone,device,time:new Date().toLocaleString()});
 localStorage.setItem("admin_log", JSON.stringify(data));
}
</script>

</body>
</html>
