<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëŒ€ë¦¬ìš´ì „ ê¸°ì‚¬ë‹˜ ì „ìš© ì¶©ì „ê¸ˆ ë¡œë˜</title>
<style>
body {
  margin:0;
  background:#111;
  color:#fff;
  font-family:system-ui,sans-serif;
  display:flex;
  justify-content:center;
}
.wrap {
  width:100%;
  max-width:420px;
  min-height:100vh;
  padding:20px;
  box-sizing:border-box;
  text-align:center;
}
h1 { margin-bottom:6px; }
.sub { font-size:13px; color:#aaa; }

.machine {
  margin:20px auto;
  min-height:120px;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
}
.ball {
  width:60px;
  height:60px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, #ffcc00);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#000;
  font-weight:bold;
  animation:pop .5s ease;
}
@keyframes pop {
  from { transform:scale(0); opacity:0; }
  to { transform:scale(1); opacity:1; }
}

button {
  width:100%;
  padding:15px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#ffcc00;
  color:#000;
  font-weight:bold;
}
button:disabled {
  background:#555;
  color:#999;
}

.box {
  margin-top:14px;
  padding:12px;
  background:#222;
  border-radius:10px;
  font-size:14px;
}
input {
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  font-size:15px;
  margin-top:8px;
}

.highlight { color:#ffcc00; font-weight:bold; }
</style>
</head>
<body>

<div class="wrap">
  <h1>ğŸ± í¬ì¸íŠ¸ ë¡œë˜</h1>
  <div class="sub">í¬ì¸íŠ¸ ì ë¦½ ì´ë²¤íŠ¸</div>

  <div class="box">
    ğŸ“± íœ´ëŒ€í° ë²ˆí˜¸ ì…ë ¥
    <input id="phone" placeholder="01012345678">
    <button style="margin-top:8px" onclick="savePhone()">í™•ì¸</button>
  </div>

  <div class="machine" id="machine"></div>

  <button id="drawBtn" disabled>ê³µ êµ´ë¦¬ê¸°</button>

  <div class="box">
    ë‚¨ì€ ê¸°íšŒ: <span id="chance"></span><br>
    ëˆ„ì  í¬ì¸íŠ¸: <span id="point"></span>P
    <div id="exchange" class="highlight" style="display:none;">
      â–¶ 10ë§Œì  ì´ìƒ ì‹œ ì¶©ì „ê¸ˆ êµí™˜ ê°€ëŠ¥
    </div>
  </div>

  <div class="box">
    ğŸ”‘ ê´€ë¦¬ì ì½”ë“œ
    <input id="adminCode" placeholder="ê´€ë¦¬ì ì½”ë“œ ì…ë ¥">
    <button style="margin-top:8px" onclick="adminAdd()">ê¸°íšŒ ì¶”ê°€</button>
  </div>

  <div class="box">
    ğŸ“ ê¸°ì‚¬ ê°€ì… ë¬¸ì˜<br>
    <span class="highlight">02-470-0071</span>
  </div>
</div>

<script>
const ADMIN_CODE = "DRIVER_OK_2026";
const TARGET_MIN = 80000;
const TARGET_MAX = 90000;

let state = JSON.parse(localStorage.getItem("lottoState")) || {
  phone: "",
  chance: 6,
  point: 0
};

const phoneInput = document.getElementById("phone");
const drawBtn = document.getElementById("drawBtn");
const machine = document.getElementById("machine");
const chanceEl = document.getElementById("chance");
const pointEl = document.getElementById("point");
const exchangeEl = document.getElementById("exchange");

function save(){
  localStorage.setItem("lottoState", JSON.stringify(state));
}

function render(){
  chanceEl.innerText = state.chance;
  pointEl.innerText = state.point.toLocaleString();
  exchangeEl.style.display = state.point >= 100000 ? "block" : "none";
  drawBtn.disabled = !state.phone || state.chance <= 0;
}

function savePhone(){
  const v = phoneInput.value.replace(/[^0-9]/g,"");
  if(!/^010\d{8}$/.test(v)){
    alert("íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }
  state.phone = v;
  save();
  render();
}

function pick(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

function getReward(){
  if(state.chance === 1){
    let min = TARGET_MIN - state.point;
    let max = TARGET_MAX - state.point;
    min = Math.max(1000, min);
    max = Math.max(min, max);
    return Math.floor((Math.random()*(max-min)+min)/1000)*1000;
  }
  return pick([8000,9000,10000,12000,15000]);
}

drawBtn.onclick = () => {
  if(state.chance <= 0) return;

  const gain = getReward(); // â˜… ë‹¨ì¼ ê¸°ì¤€
  state.chance -= 1;
  state.point += gain;

  const ball = document.createElement("div");
  ball.className = "ball";
  ball.innerText = (gain/10000)+"ë§Œ";
  machine.appendChild(ball);

  save();
  render();
};

function adminAdd(){
  const code = document.getElementById("adminCode").value;
  if(code === ADMIN_CODE){
    state.chance += 1;
    save();
    render();
    alert("ê¸°ì‚¬ ë“±ë¡ í™•ì¸! ê¸°íšŒê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
  } else {
    alert("ì˜ëª»ëœ ì½”ë“œì…ë‹ˆë‹¤.");
  }
}

if(state.phone){
  phoneInput.value = state.phone;
}
render();
</script>
</body>
</html>
