<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëŒ€ë¦¬ìš´ì „ í¬ì¸íŠ¸ ë¡œë˜</title>

<style>
html,body{
  margin:0;height:100%;background:#111;color:#fff;font-family:sans-serif
}
.container{
  height:100vh;display:flex;flex-direction:column;
  justify-content:space-between;padding:20px
}
h2{text-align:center}
.info{text-align:center;font-size:20px}

.machine{
  position:relative;
  width:200px;height:200px;
  margin:0 auto;
  border-radius:50%;
  background:#222;
  overflow:hidden;
}
.balls{
  position:absolute;
  bottom:0;
  width:100%;height:100%;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:center;
  animation: shake 0.3s infinite;
}
.ball{
  width:30px;height:30px;border-radius:50%;
  background:#ffcc00;margin:5px;
}
@keyframes shake{
  0%{transform:translate(0,0)}
  25%{transform:translate(2px,2px)}
  50%{transform:translate(-2px,-2px)}
  75%{transform:translate(2px,-2px)}
  100%{transform:translate(0,0)}
}

.pick{
  animation: pop 1s forwards;
}
@keyframes pop{
  0%{transform:translateY(0)}
  100%{transform:translateY(-120px) scale(1.5)}
}

.result{
  text-align:center;
  font-size:24px;
  margin-top:10px;
}

button{
  width:100%;padding:18px;font-size:18px;
  border:none;border-radius:12px;background:#ffcc00
}
input{
  width:100%;padding:14px;font-size:16px;
  border-radius:10px;border:none;margin-top:10px
}
.log{text-align:center;color:#ccc;min-height:40px}
.small{text-align:center;font-size:12px;color:#777}
</style>
</head>

<body>

<div class="container">

  <div>
    <h2>ğŸ° ëŒ€ë¦¬ìš´ì „ í¬ì¸íŠ¸ ë¡œë˜</h2>
    <div class="info">í¬ì¸íŠ¸: <span id="point">0</span>P</div>
    <div class="info">ë‚¨ì€ ê¸°íšŒ: <span id="chance">0</span>íšŒ</div>
  </div>

  <div>
    <div class="machine">
      <div class="balls" id="balls">
        <div class="ball"></div><div class="ball"></div><div class="ball"></div>
        <div class="ball"></div><div class="ball"></div><div class="ball"></div>
        <div class="ball"></div><div class="ball"></div><div class="ball"></div>
      </div>
    </div>
    <div class="result" id="result">?</div>

    <button onclick="draw()">ê³µ ë½‘ê¸° ğŸ¯</button>
    <div class="log" id="log"></div>

    <hr style="border:1px solid #333;margin:20px 0">

    <h3>ğŸš– ê¸°ì‚¬ ì†Œê°œ</h3>
    <input id="phone" placeholder="ê¸°ì‚¬ ì „í™”ë²ˆí˜¸ (-ì—†ì´)">
    <button onclick="invite()">ê¸°ì‚¬ ì†Œê°œ â†’ ê¸°íšŒ +1</button>
  </div>

  <div class="small">
    10ë§ŒP ì´ìƒë¶€í„° ì¶©ì „ê¸ˆ ì „í™˜ ê°€ëŠ¥<br>
    ìƒˆë¡œê³ ì¹¨í•´ë„ ê¸°íšŒëŠ” ë³µêµ¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
  </div>

</div>

<script>
// ğŸ”’ ìµœì´ˆ 1íšŒë§Œ ì´ˆê¸° ì§€ê¸‰
if(localStorage.getItem("initialized")!=="yes"){
  localStorage.setItem("chance",6);
  localStorage.setItem("point",0);
  localStorage.setItem("invited","[]");
  localStorage.setItem("initialized","yes");
}

let point = Number(localStorage.getItem("point"));
let chance = Number(localStorage.getItem("chance"));
let invited = JSON.parse(localStorage.getItem("invited"));

update();

function draw(){
  if(chance<=0) return log("âŒ ê¸°íšŒ ì—†ìŒ. ê¸°ì‚¬ ì†Œê°œ í•„ìš”");

  const balls = document.getElementById("balls");
  balls.style.animationPlayState="running";
  document.getElementById("result").innerText="";

  setTimeout(()=>{
    balls.style.animationPlayState="paused";

    let reward;
    if(invited.length < 3){
      reward = pick([1000,3000,5000,7000,10000]);
    }else{
      reward = pick([10000,20000,30000]);
    }

    point += reward;
    chance--;

    document.getElementById("result").innerText =
      reward.toLocaleString()+"P";

    save(); update();
    log("ğŸ‰ ë‹¹ì²¨!");
  },2000);
}

function invite(){
  let phone=document.getElementById("phone").value.trim();
  if(phone.length<10) return log("ì „í™”ë²ˆí˜¸ í™•ì¸");
  if(invited.includes(phone)) return log("ì´ë¯¸ ë“±ë¡ëœ ê¸°ì‚¬");

  invited.push(phone);
  chance++;
  save(); update();
  log("âœ… ê¸°ì‚¬ ì†Œê°œ ì™„ë£Œ! ê¸°íšŒ +1");
}

function pick(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}
function save(){
  localStorage.setItem("point",point);
  localStorage.setItem("chance",chance);
  localStorage.setItem("invited",JSON.stringify(invited));
}
function update(){
  document.getElementById("point").innerText=point.toLocaleString();
  document.getElementById("chance").innerText=chance;
}
function log(msg){
  document.getElementById("log").innerText=msg;
}
</script>

</body>
</html>
