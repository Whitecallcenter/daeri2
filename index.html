<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>í¬ì¸íŠ¸ ë¡œë˜</title>
<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #111;
    color: #fff;
    display: flex;
    justify-content: center;
  }
  .wrap {
    width: 100%;
    max-width: 420px;
    min-height: 100vh;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
  }
  h1 { margin-bottom: 5px; }
  .sub { font-size: 14px; color: #bbb; }

  .machine {
    margin: 20px auto;
    min-height: 120px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }
  .ball {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff, #ffcc00);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-weight: bold;
    animation: pop 0.6s ease;
  }
  @keyframes pop {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  button {
    width: 100%;
    padding: 15px;
    font-size: 16px;
    border: none;
    border-radius: 10px;
    background: #ffcc00;
    color: #000;
    font-weight: bold;
    cursor: pointer;
  }
  button:disabled {
    background: #555;
    color: #999;
  }

  .box {
    margin-top: 15px;
    padding: 12px;
    background: #222;
    border-radius: 10px;
    font-size: 14px;
  }

  input {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border-radius: 8px;
    border: none;
    font-size: 15px;
  }

  .highlight {
    color: #ffcc00;
    font-weight: bold;
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ± í¬ì¸íŠ¸ ë¡œë˜</h1>
  <div class="sub">6íšŒ ì¢…ë£Œ ì‹œ 8~9ë§Œ í¬ì¸íŠ¸ ì§€ê¸‰</div>

  <div class="machine" id="machine"></div>

  <button id="drawBtn">ê³µ êµ´ë¦¬ê¸°</button>

  <div class="box">
    ë‚¨ì€ ê¸°íšŒ: <span id="chance"></span><br/>
    ëˆ„ì  í¬ì¸íŠ¸: <span id="point"></span>P
    <div id="exchange" class="highlight" style="display:none;">
      â–¶ 10ë§Œì  ì´ìƒ ì‹œ ì¶©ì „ê¸ˆ êµí™˜ ê°€ëŠ¥
    </div>
  </div>

  <div class="box">
    ğŸ”‘ ê´€ë¦¬ì ì½”ë“œ ì…ë ¥
    <input id="adminCode" placeholder="ê´€ë¦¬ì ì½”ë“œ ì…ë ¥"/>
    <button style="margin-top:8px;" onclick="adminAdd()">ê¸°íšŒ ì¶”ê°€</button>
  </div>

  <div class="box">
    ğŸ“ ê¸°ì‚¬ ê°€ì… ë¬¸ì˜<br/>
    <span class="highlight">02-470-0071</span>
  </div>
</div>

<script>
const TARGET_MIN = 80000;
const TARGET_MAX = 90000;
const ADMIN_CODE = "DRIVER_OK_2026";

let state = JSON.parse(localStorage.getItem("lottoState")) || {
  chance: 6,
  point: 0,
  draws: []
};

const machine = document.getElementById("machine");
const drawBtn = document.getElementById("drawBtn");
const chanceEl = document.getElementById("chance");
const pointEl = document.getElementById("point");
const exchangeEl = document.getElementById("exchange");

function save() {
  localStorage.setItem("lottoState", JSON.stringify(state));
}

function render() {
  chanceEl.innerText = state.chance;
  pointEl.innerText = state.point.toLocaleString();
  exchangeEl.style.display = state.point >= 100000 ? "block" : "none";
  drawBtn.disabled = state.chance <= 0;
}

function pick(arr){
  return arr[Math.floor(Math.random() * arr.length)];
}

function getReward(){
  if(state.chance === 1){
    let needMin = TARGET_MIN - state.point;
    let needMax = TARGET_MAX - state.point;
    needMin = Math.max(1000, needMin);
    needMax = Math.max(needMin, needMax);
    return Math.floor(
      (Math.random() * (needMax - needMin) + needMin) / 1000
    ) * 1000;
  }
  return pick([8000,9000,10000,12000,15000]);
}

drawBtn.onclick = () => {
  if(state.chance <= 0) return;

  const gain = getReward();
  state.chance -= 1;
  state.point += gain;
  state.draws.push(gain);

  const ball = document.createElement("div");
  ball.className = "ball";
  ball.innerText = (gain/1000) + "ë§Œ";
  machine.appendChild(ball);

  save();
  render();
};

function adminAdd(){
  const input = document.getElementById("adminCode");
  if(input.value === ADMIN_CODE){
    state.chance += 1;
    save();
    render();
    alert("ê¸°ì‚¬ ë“±ë¡ í™•ì¸! ì¶”ì²¨ ê¸°íšŒê°€ 1íšŒ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
    input.value = "";
  } else {
    alert("ì˜ëª»ëœ ì½”ë“œì…ë‹ˆë‹¤.");
  }
}

render();
</script>
</body>
</html>
